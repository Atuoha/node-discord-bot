'use strict';"production"!==process.env.NODE_ENV&&require("dotenv").config();const axios=require("axios"),{Client,Intents,MessageEmbed}=require("discord.js"),client=new Client({intents:[Intents.FLAGS.GUILDS,Intents.FLAGS.GUILD_MEMBERS,Intents.FLAGS.GUILD_MESSAGES]});client.on("ready",()=>{console.log(`Logged in as ${client.user.tag}!`)});function getRandomNumber(a,b){return Math.floor(Math.random()*(b-a)+a)}sadWords=["sad","depressed","unhappy","angry","miserable"];
encouragements=["Cheer up!","Hang in there.","You are a great person"];const PREFIX="$";
client.on("messageCreate",a=>{console.log(`[${a.author.username}]: ${a.content}`);if(!a.author.bot){"hi"!==a.content.toLowerCase()&&"hello"!==a.content.toLowerCase()&&"hey"!==a.content.toLowerCase()||a.reply(`Hi ${a.author.username}! Welcome to Mutant-Age Camel Club. We happy to have you here with us. `);(a.content.toLowerCase().includes("hey bot")||a.content.toLowerCase().includes("general kenobi"))&&a.channel.send("Hello there!");if(a.content.startsWith(PREFIX)){const [c,...e]=a.content.trim().substring(PREFIX.length).substring(/\s+/);
if("kick"===c){if(!a.member.hasPermission("KICK_MEMBERS"))return a.channel.send("You do not have enough permissions to use this command");if(1>e.length)return a.channel.send("Please provide a User ID");const d=a.guide.cache.get(e[0]);d?d.kick().then(f=>f.channel.send(`${d} kicked user due to server rules and regulation violaition!!`)).catch(f=>a.channel.send("You do not have enough permission to kick out a user")):a.channel.send("No user with such ID here!")}if("ban"===c){if(!a.member.hasPermission("BAN_MEMBERS"))return a.channel.send("You do not have enough permissions to use this command");
if(1>e.length)return a.channel.send("Please provide a User ID");const d=a.guide.cache.get(e[0]);d?d.ban().then(f=>f.channel.send(`${d} Banned user due to server rules and regulation violaition!!`)).catch(f=>a.channel.send("You do not have enough permission to ban out a user")):a.channel.send("No user with such ID here!")}}if("$commands"==a.content){var b=(new MessageEmbed).setColor("#ffd046").setTitle("Server Commands").setDescription("Here you can see the list of the commands used on the server: ").addFields({name:"`$rules`",
value:"Rules and Regulations"},{name:"`$about`",value:"About Server"},{name:"`$news`",value:"News pertaining Cryptocurrency"},{name:"`$price`",value:" $price <coin_name> <compare_currency> - To get the price of a coin with respect to another coin or currency"},{name:"`$inspire`",value:"Inspirations"},{name:"`$lucky-number`",value:"Returns a lucky number"},{name:"`$like`",value:"Likes the current message"},{name:"`$dislike`",value:"Dislikes the current message"});a.channel.send({embeds:[b]})}"$like"==
a.content&&a.react("\ud83d\udc4d");"$rules"==a.content&&(a.react("\ud83d\udcaf"),b=(new MessageEmbed).setColor("#ffd046").setTitle("Server Rules and Regulations").setDescription("Welcome to MACC\u2019s Discord Community! We are\n          happy to have you and excited you\u2019re here.. But, before you get to meet our community and other special people like you, there are some important rules you\n          are expected to follow as part of our community.").addFields({name:"Safety and Harassment",
value:"This Discord server is a safe environment for all users and as such harassment is not allowed. Harassment includes, but is not limited to: offensive verbal or written comments about someone's race, religion, gender/gender identity, sexual orientation, physical appearance, and economic or social status. The use of offensive or discriminatory language is not permitted. Jokes or memes at the expense of anything listed above or bullying of any sort will not be tolerated. There are people here from many different\n              backgrounds so please be respectful of others.\n              The rules about harassment and bullying apply to both\n              text and voice channels. Additionally, harassing\n              community members via DM is not allowed and should be reported immediately. While interactions outside of our server are outside of our control, behavior which starts to affect the MACC Community will be dealt with\n              accordingly."},
{name:"Appropriate Content",value:"MACC is a safe community with members of all ages. Do not share or reference pornographic or highly suggestive content. Graphic violence, illegal activity or any other NSFW content shared via links, images, videos, gifs or emotes will be removed immediately. Be sensible of the minors in our community."},{name:"Channel Usage",value:"Everything has its place! Please keep chat relevant to the channel you are in. For example, support requests should take place in our support channel, feedback should be given in our feedback channel, and so on. Please make use of our off-topic and random channels for anything that doesn't fit into another channel!\n              Self promotion and link spamming, including to other\n              Discord servers, is not allowed."},
{name:"Getting Support",value:"Providing support to you is very important to us! No\n              matter the request and questions, our support\n              channel is here to help. The admins and mods reserve the right to ban/kick/mute per discretion. If you feel maltreated, open a ticket and the admins will resolve the issue."},{name:"Moderators and Admins",value:"The moderators and admins are members of the community who have been selected by staff. They are Problem solving experts  who help others in their own time. Please be respectful and patient with them - they are trying their best to help!\n              Spamming our support channel or harassing our Support Team or Moderators  will result in an immediate mute. While they're here to help, they will be unable to do so if you do not conduct yourself in an appropriate manner.\n              We want everyone to have an enjoyable experience in the MACC Community as such breaking any of these rules can result in a ban, at the discretion of the staff"},
{name:"Bots and commands ",value:"Do not abuse the bots and commands. Do not take advantage of the leveling system or participant within the community with bad faith. Staff have low tolerance of the offense. \n              Don\u2019t forget to have fun in the MACC community."}),a.channel.send({embeds:[b]}));"$inspire"===a.content&&(a.react("\ud83d\udcaf"),b=encodeURI("https://zenquotes.io/api/random"),axios.get(b).then(c=>{a.channel.send(c.data[0].q+" -"+c.data[0].a)}).catch(c=>{a.channel.send("There was an error. Please try again later.")}));
a.content.startsWith("$news")&&(a.react("\ud83d\udcaf"),b=encodeURI("https://newsapi.org/v2/everything?q=crypto&apiKey=612ac56fb8344a48aa7a01cb9aa71cf6&pageSize=1&sortBy=publishedAt&language=en"),axios.get(b).then(c=>{const {title:e,source:{name:d},description:f,url:g}=c.data.articles[0];a.channel.send(`Latest news related to crypto:\n
            Title: ${e}\n
            Description: ${f}\n
            Source: ${d}\n
            Link to full article: ${g}`)}).catch(c=>{a.channel.send("There was an error. Please try again later.")}));sadWords.some(c=>a.content.includes(c))&&(b=encouragements[Math.floor(Math.random()*encouragements.length)],a.react("\ud83d\ude0d"),a.reply(b));if(a.content.startsWith("$price"))if([,...b]=a.content.split(" "),2!==b.length)a.reply("You must provide the crypto and the currency to compare with!");else{const [c,e]=b;b=encodeURI(`https://api.coingecko.com/api/v3/simple/price?ids=${c}&vs_currencies=${e}`);
axios.get(b).then(d=>{d.data[c][e]||a.reply("Please check your inputs - Data doesn't exist!. For example: $price bitcoin usd ");a.react("\ud83d\ude0d");a.reply(`The current price of 1 ${c} = ${d.data[c][e]} ${e}`)}).catch(d=>{a.reply("Please check your inputs. For example: $price bitcoin usd")})}"$about"==a.content&&(a.react("\ud83d\udcc3"),a.channel.send("WELCOME TO THE MUTANT AGE CAMEL CLUB! \n          MACC is a collection of 10,000 Mutant Camel NFTs\u2014unique digital collectibles Roaming around the Ethereum blockchain. Your Mutant Camel is your membership card. Keep it safe, it grants you membership perks."));
"$dislike"==a.content&&a.react("\ud83d\udc4e");"$lucky-number"==a.content&&(a.react("\ud83d\ude0d"),b=getRandomNumber(0,1E3),a.reply(`Your new lucky number is ${b}.`))}});client.on("guildMemberAdd",a=>{const b=`Hey <@${a.id}>! Welcome to  Mutant-Age Camel Club! \n See commands list by typing: $commands. To view price of cryptocurrency use this format: "$price bitcoin usd" | For new use $news`;a.guild.channels.fetch(process.env.ID).then(c=>{c.send(b)})});client.login(process.env.TOKEN);